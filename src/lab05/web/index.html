<!-- lab05/web/index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Converter - –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ñ–∞–π–ª–æ–≤</title>
    <style>
        :root {
            --primary-purple: #8a2be2;
            --secondary-purple: #9370db;
            --light-purple: #e6e6fa;
            --dark-purple: #4b0082;
            --accent-purple: #6a0dad;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f0e6ff, #e6e6fa);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(138, 43, 226, 0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-purple), var(--dark-purple));
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .conversion-section {
            padding: 30px;
        }
        
        .section-title {
            color: var(--dark-purple);
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid var(--light-purple);
            padding-bottom: 10px;
        }
        
        .conversion-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .conv-btn {
            background: var(--secondary-purple);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .conv-btn:hover {
            background: var(--primary-purple);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.3);
        }
        
        .conv-btn.active {
            background: var(--dark-purple);
            box-shadow: 0 0 0 3px var(--light-purple);
        }
        
        .file-inputs {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .file-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .file-group label {
            color: var(--dark-purple);
            font-weight: bold;
        }
        
        .file-input-row {
            display: flex;
            gap: 10px;
        }
        
        .file-input-row input {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--light-purple);
            border-radius: 8px;
            font-size: 1em;
        }
        
        .file-input-row input:focus {
            outline: none;
            border-color: var(--secondary-purple);
        }
        
        .browse-btn {
            background: var(--secondary-purple);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .browse-btn:hover {
            background: var(--primary-purple);
        }
        
        .convert-btn {
            background: linear-gradient(135deg, var(--primary-purple), var(--dark-purple));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            width: 100%;
        }
        
        .convert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(138, 43, 226, 0.4);
        }
        
        .convert-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }
        
        .status.ready {
            background: var(--light-purple);
            color: var(--dark-purple);
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .file-upload {
            background: var(--light-purple);
            border: 2px dashed var(--secondary-purple);
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-upload:hover {
            background: #e0d6ff;
            border-color: var(--primary-purple);
        }
        
        .file-upload i {
            font-size: 3em;
            color: var(--secondary-purple);
            margin-bottom: 10px;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìÅ –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ñ–∞–π–ª–æ–≤</h1>
            <p>–ü—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏</p>
        </div>
        
        <div class="conversion-section">
            <div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏</div>
            
            <div class="conversion-buttons">
                <button class="conv-btn" onclick="selectConversion('json_to_csv')">JSON ‚Üí CSV</button>
                <button class="conv-btn" onclick="selectConversion('csv_to_json')">CSV ‚Üí JSON</button>
                <button class="conv-btn" onclick="selectConversion('csv_to_xlsx')">CSV ‚Üí XLSX</button>
                <button class="conv-btn" onclick="selectConversion('xlsx_to_csv')">XLSX ‚Üí CSV</button>
            </div>
            
            <div class="file-upload" id="uploadArea" onclick="document.getElementById('fileInput').click()">
                <div>üì§</div>
                <h3>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –µ–≥–æ —Å—é–¥–∞</h3>
                <p>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JSON, CSV, XLSX</p>
                <input type="file" id="fileInput" class="hidden" accept=".json,.csv,.xlsx">
            </div>
            
            <div class="file-inputs" id="fileInputs" style="display: none;">
                <div class="file-group">
                    <label>–í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª:</label>
                    <div class="file-input-row">
                        <input type="text" id="inputFile" readonly placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª...">
                        <button class="browse-btn" onclick="browseInputFile()">–û–±–∑–æ—Ä</button>
                    </div>
                </div>
                
                <div class="file-group">
                    <label>–í—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª:</label>
                    <div class="file-input-row">
                        <input type="text" id="outputFile" readonly placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è...">
                        <button class="browse-btn" onclick="browseOutputFile()">–û–±–∑–æ—Ä</button>
                    </div>
                </div>
                
                <button class="convert-btn" id="convertBtn" onclick="convertFile()" disabled>
                    –ù–∞—á–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é
                </button>
                
                <div class="status ready" id="status">
                    –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentConversion = null;
        let selectedFile = null;
        
        function selectConversion(conversionType) {
            currentConversion = conversionType;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.conv-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
            event.target.classList.add('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
            document.getElementById('fileInputs').style.display = 'block';
            document.getElementById('uploadArea').style.display = 'none';
            
            updateStatus(`–í—ã–±—Ä–∞–Ω–æ: ${getConversionName(conversionType)}`, 'ready');
            updateConvertButton();
        }
        
        function getConversionName(type) {
            const names = {
                'json_to_csv': 'JSON ‚Üí CSV',
                'csv_to_json': 'CSV ‚Üí JSON', 
                'csv_to_xlsx': 'CSV ‚Üí XLSX',
                'xlsx_to_csv': 'XLSX ‚Üí CSV'
            };
            return names[type] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        }
        
        function browseInputFile() {
            const input = document.createElement('input');
            input.type = 'file';
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º accept –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
            if (currentConversion === 'json_to_csv') {
                input.accept = '.json';
            } else if (currentConversion === 'csv_to_json' || currentConversion === 'csv_to_xlsx') {
                input.accept = '.csv';
            } else if (currentConversion === 'xlsx_to_csv') {
                input.accept = '.xlsx';
            }
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    selectedFile = file;
                    document.getElementById('inputFile').value = file.name;
                    autoFillOutputFile(file.name);
                    updateConvertButton();
                }
            };
            
            input.click();
        }
        
        function browseOutputFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.onchange = function(e) {
                document.getElementById('outputFile').value = e.target.files[0].name;
                updateConvertButton();
            };
            input.click();
        }
        
        function autoFillOutputFile(inputFilename) {
            if (!currentConversion || !inputFilename) return;
            
            const baseName = inputFilename.replace(/\.[^/.]+$/, "");
            let outputExtension = '';
            
            switch(currentConversion) {
                case 'json_to_csv':
                    outputExtension = '.csv';
                    break;
                case 'csv_to_json':
                    outputExtension = '.json';
                    break;
                case 'csv_to_xlsx':
                    outputExtension = '.xlsx';
                    break;
                case 'xlsx_to_csv':
                    outputExtension = '.csv';
                    break;
            }
            
            document.getElementById('outputFile').value = baseName + outputExtension;
        }
        
        function updateConvertButton() {
            const inputFile = document.getElementById('inputFile').value;
            const outputFile = document.getElementById('outputFile').value;
            const convertBtn = document.getElementById('convertBtn');
            
            convertBtn.disabled = !(currentConversion && inputFile && outputFile);
        }
        
        function updateStatus(message, type = 'ready') {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = `status ${type}`;
        }
        
        function convertFile() {
            if (!currentConversion) {
                updateStatus('–û—à–∏–±–∫–∞: –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏', 'error');
                return;
            }
            
            const inputFile = document.getElementById('inputFile').value;
            const outputFile = document.getElementById('outputFile').value;
            
            if (!inputFile || !outputFile) {
                updateStatus('–û—à–∏–±–∫–∞: —É–∫–∞–∂–∏—Ç–µ –æ–±–∞ —Ñ–∞–π–ª–∞', 'error');
                return;
            }
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã AJAX –∑–∞–ø—Ä–æ—Å)
            updateStatus('–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è...', 'ready');
            
            setTimeout(() => {
                updateStatus(`–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! ${inputFile} ‚Üí ${outputFile}`, 'success');
                
                // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –±—ã–ª –±—ã —Ä–µ–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª)
                const convertBtn = document.getElementById('convertBtn');
                convertBtn.textContent = '–°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç';
                convertBtn.onclick = function() {
                    alert('–í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–æ –±—ã —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞');
                    // –°–±—Ä–æ—Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                    resetInterface();
                };
            }, 2000);
        }
        
        function resetInterface() {
            document.getElementById('inputFile').value = '';
            document.getElementById('outputFile').value = '';
            document.getElementById('convertBtn').textContent = '–ù–∞—á–∞—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é';
            document.getElementById('convertBtn').onclick = convertFile;
            updateStatus('–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ', 'ready');
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ drag and drop
        const uploadArea = document.getElementById('uploadArea');
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.background = '#e0d6ff';
            uploadArea.style.borderColor = 'var(--primary-purple)';
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.background = 'var(--light-purple)';
            uploadArea.style.borderColor = 'var(--secondary-purple)';
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.background = 'var(--light-purple)';
            uploadArea.style.borderColor = 'var(--secondary-purple)';
            
            const file = e.dataTransfer.files[0];
            if (file) {
                selectedFile = file;
                document.getElementById('inputFile').value = file.name;
                autoFillOutputFile(file.name);
                updateConvertButton();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
                document.getElementById('fileInputs').style.display = 'block';
                document.getElementById('uploadArea').style.display = 'none';
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ input
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                selectedFile = file;
                document.getElementById('inputFile').value = file.name;
                autoFillOutputFile(file.name);
                updateConvertButton();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
                document.getElementById('fileInputs').style.display = 'block';
                document.getElementById('uploadArea').style.display = 'none';
            }
        });
    </script>
</body>
</html>